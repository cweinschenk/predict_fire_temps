var data = [
{"time":  0 , "temperature":  22.3  },
{"time":  1 , "temperature":  22.4  },
{"time":  2 , "temperature":  22.3  },
{"time":  3 , "temperature":  22.3  },
{"time":  4 , "temperature":  22.2  },
{"time":  5 , "temperature":  22.2  },
{"time":  6 , "temperature":  22.2  },
{"time":  7 , "temperature":  22.2  },
{"time":  8 , "temperature":  22.2  },
{"time":  9 , "temperature":  22.2  },
{"time":  10  , "temperature":  22.1  },
{"time":  11  , "temperature":  22  },
{"time":  12  , "temperature":  21.9  },
{"time":  13  , "temperature":  21.9  },
{"time":  14  , "temperature":  21.9  },
{"time":  15  , "temperature":  21.9  },
{"time":  16  , "temperature":  21.9  },
{"time":  17  , "temperature":  21.9  },
{"time":  18  , "temperature":  22  },
{"time":  19  , "temperature":  22.9  },
{"time":  20  , "temperature":  25.1  },
{"time":  21  , "temperature":  27.8  },
{"time":  22  , "temperature":  30.1  },
{"time":  23  , "temperature":  32.5  },
{"time":  24  , "temperature":  35.1  },
{"time":  25  , "temperature":  39.8  },
{"time":  26  , "temperature":  44.3  },
{"time":  27  , "temperature":  49  },
{"time":  28  , "temperature":  52.7  },
{"time":  29  , "temperature":  58.6  },
{"time":  30  , "temperature":  66.3  },
{"time":  31  , "temperature":  75  },
{"time":  32  , "temperature":  82.1  },
{"time":  33  , "temperature":  90.4  },
{"time":  34  , "temperature":  100 },
{"time":  35  , "temperature":  109.9 },
{"time":  36  , "temperature":  116.6 },
{"time":  37  , "temperature":  120 },
{"time":  38  , "temperature":  122 },
{"time":  39  , "temperature":  124.5 },
{"time":  40  , "temperature":  126.9 },
{"time":  41  , "temperature":  128.9 },
{"time":  42  , "temperature":  130 },
{"time":  43  , "temperature":  131.4 },
{"time":  45  , "temperature":  132.2 },
{"time":  46  , "temperature":  133 },
{"time":  47  , "temperature":  133.3 },
{"time":  48  , "temperature":  134.9 },
{"time":  49  , "temperature":  137.9 },
{"time":  50  , "temperature":  142.7 },
{"time":  51  , "temperature":  147.4 },
{"time":  52  , "temperature":  151.3 },
{"time":  53  , "temperature":  155.5 },
{"time":  54  , "temperature":  158.7 },
{"time":  55  , "temperature":  160.9 },
{"time":  56  , "temperature":  162.2 },
{"time":  57  , "temperature":  165.3 },
{"time":  58  , "temperature":  169.1 },
{"time":  59  , "temperature":  172.1 },
{"time":  60  , "temperature":  175.4 },
{"time":  61  , "temperature":  178.1 },
{"time":  62  , "temperature":  181.4 },
{"time":  63  , "temperature":  182.7 },
{"time":  64  , "temperature":  184.3 },
{"time":  65  , "temperature":  185.2 },
{"time":  66  , "temperature":  187.1 },
{"time":  67  , "temperature":  189.4 },
{"time":  68  , "temperature":  193.9 },
{"time":  69  , "temperature":  200.4 },
{"time":  70  , "temperature":  207.7 },
{"time":  71  , "temperature":  213.8 },
{"time":  72  , "temperature":  219.3 },
{"time":  73  , "temperature":  224.8 },
{"time":  74  , "temperature":  230 },
{"time":  75  , "temperature":  233.5 },
{"time":  76  , "temperature":  234.4 },
{"time":  77  , "temperature":  236.9 },
{"time":  78  , "temperature":  238.5 },
{"time":  79  , "temperature":  243.9 },
{"time":  80  , "temperature":  246.3 },
{"time":  81  , "temperature":  249 },
{"time":  82  , "temperature":  252.8 },
{"time":  83  , "temperature":  257.6 },
{"time":  84  , "temperature":  265.6 },
{"time":  85  , "temperature":  269.2 },
{"time":  86  , "temperature":  271.4 },
{"time":  87  , "temperature":  272.3 },
{"time":  88  , "temperature":  276.5 },
{"time":  89  , "temperature":  278.7 },
{"time":  90  , "temperature":  278.1 },
{"time":  91  , "temperature":  274.7 },
{"time":  92  , "temperature":  273.5 },
{"time":  93  , "temperature":  274.7 },
{"time":  94  , "temperature":  275.1 },
{"time":  95  , "temperature":  275.5 },
{"time":  96  , "temperature":  279.1 },
{"time":  97  , "temperature":  283.2 },
{"time":  98  , "temperature":  287.9 },
{"time":  99  , "temperature":  287.5 },
{"time":  100 , "temperature":  289.9 },
{"time":  101 , "temperature":  293.9 },
{"time":  102 , "temperature":  300.1 },
{"time":  103 , "temperature":  303.9 },
{"time":  104 , "temperature":  307.4 },
{"time":  105 , "temperature":  310.2 },
{"time":  106 , "temperature":  314.6 },
{"time":  107 , "temperature":  317.7 },
{"time":  108 , "temperature":  318.8 },
{"time":  109 , "temperature":  319.2 },
{"time":  110 , "temperature":  323.8 },
{"time":  111 , "temperature":  331.8 },
{"time":  112 , "temperature":  343.8 },
{"time":  113 , "temperature":  363.3 },
{"time":  114 , "temperature":  379 },
{"time":  115 , "temperature":  389.2 },
{"time":  116 , "temperature":  396 },
{"time":  117 , "temperature":  404.6 },
{"time":  118 , "temperature":  420.3 },
{"time":  119 , "temperature":  432.3 },
{"time":  120 , "temperature":  453.5 },
{"time":  121 , "temperature":  479.7 },
{"time":  122 , "temperature":  519.2 },
{"time":  123 , "temperature":  563.1 },
{"time":  124 , "temperature":  607.2 },
{"time":  125 , "temperature":  650.9 },
{"time":  126 , "temperature":  689.3 },
{"time":  127 , "temperature":  727 },
{"time":  128 , "temperature":  747.8 },
{"time":  129 , "temperature":  763 },
{"time":  130 , "temperature":  768.8 },
{"time":  131 , "temperature":  784.7 },
{"time":  132 , "temperature":  802.3 },
{"time":  133 , "temperature":  824.8 },
{"time":  134 , "temperature":  837 },
{"time":  135 , "temperature":  849.3 },
{"time":  136 , "temperature":  852.1 },
{"time":  137 , "temperature":  854.8 },
{"time":  138 , "temperature":  848.3 },
{"time":  139 , "temperature":  842.3 },
{"time":  140 , "temperature":  832.2 },
{"time":  141 , "temperature":  824.5 },
{"time":  142 , "temperature":  816.5 },
{"time":  143 , "temperature":  814.5 },
{"time":  144 , "temperature":  815.8 },
{"time":  145 , "temperature":  821.4 },
{"time":  146 , "temperature":  823.8 },
{"time":  147 , "temperature":  826.5 },
{"time":  148 , "temperature":  829.1 },
{"time":  149 , "temperature":  830.6 },
{"time":  150 , "temperature":  834.2 },
{"time":  151 , "temperature":  835.9 },
{"time":  152 , "temperature":  839.4 },
{"time":  153 , "temperature":  838.6 },
{"time":  154 , "temperature":  838.5 },
{"time":  155 , "temperature":  834.4 },
{"time":  156 , "temperature":  832.3 },
{"time":  157 , "temperature":  830.9 },
{"time":  158 , "temperature":  838.1 },
{"time":  159 , "temperature":  841.6 },
{"time":  160 , "temperature":  844.2 },
{"time":  161 , "temperature":  846.6 },
{"time":  162 , "temperature":  851.4 },
{"time":  163 , "temperature":  855.4 },
{"time":  164 , "temperature":  861.2 },
{"time":  165 , "temperature":  873.5 },
{"time":  166 , "temperature":  890.1 },
{"time":  167 , "temperature":  905.7 },
{"time":  168 , "temperature":  916 },
{"time":  169 , "temperature":  927.5 },
{"time":  170 , "temperature":  935.3 },
{"time":  171 , "temperature":  942 },
{"time":  172 , "temperature":  959.2 },
{"time":  173 , "temperature":  976.2 },
{"time":  174 , "temperature":  994 },
{"time":  175 , "temperature":  997.2 },
{"time":  176 , "temperature":  995.3 },
{"time":  177 , "temperature":  988.5 },
{"time":  178 , "temperature":  979.7 },
{"time":  179 , "temperature":  970.8 },
{"time":  180 , "temperature":  962.5 },
{"time":  181 , "temperature":  953.5 },
{"time":  182 , "temperature":  948.1 },
{"time":  183 , "temperature":  943.8 },
{"time":  185 , "temperature":  941.4 },
{"time":  186 , "temperature":  942.4 },
{"time":  187 , "temperature":  943.5 },
{"time":  188 , "temperature":  942.2 },
{"time":  189 , "temperature":  937.8 },
{"time":  190 , "temperature":  934.1 },
{"time":  191 , "temperature":  931 },
{"time":  192 , "temperature":  930.4 },
{"time":  193 , "temperature":  929.9 },
{"time":  194 , "temperature":  932.2 },
{"time":  195 , "temperature":  934.1 },
{"time":  196 , "temperature":  937.6 },
{"time":  197 , "temperature":  939.1 },
{"time":  198 , "temperature":  938.7 },
{"time":  199 , "temperature":  934.8 },
{"time":  200 , "temperature":  929.6 },
{"time":  201 , "temperature":  923.3 },
{"time":  202 , "temperature":  918.7 },
{"time":  203 , "temperature":  915.5 },
{"time":  204 , "temperature":  912.7 },
{"time":  205 , "temperature":  909.8 },
{"time":  206 , "temperature":  907 },
{"time":  207 , "temperature":  904.1 },
{"time":  208 , "temperature":  901.2 },
{"time":  209 , "temperature":  898.4 },
{"time":  210 , "temperature":  895.5 },
{"time":  211 , "temperature":  892.7 },
{"time":  212 , "temperature":  889.8 },
{"time":  213 , "temperature":  886.9 },
{"time":  214 , "temperature":  884.1 },
{"time":  215 , "temperature":  881.2 },
{"time":  216 , "temperature":  878.4 },
{"time":  217 , "temperature":  875.5 },
{"time":  218 , "temperature":  872.6 },
{"time":  219 , "temperature":  869.8 },
{"time":  220 , "temperature":  866.9 },
{"time":  221 , "temperature":  864 },
{"time":  222 , "temperature":  861.2 },
{"time":  223 , "temperature":  858.3 },
{"time":  224 , "temperature":  855.5 },
{"time":  225 , "temperature":  852.6 },
{"time":  226 , "temperature":  849.7 },
{"time":  227 , "temperature":  846.9 },
{"time":  228 , "temperature":  844 },
{"time":  229 , "temperature":  841.2 },
{"time":  230 , "temperature":  838.3 },
{"time":  231 , "temperature":  835.4 },
{"time":  232 , "temperature":  832.6 },
{"time":  233 , "temperature":  828.8 },
{"time":  234 , "temperature":  825.4 },
{"time":  235 , "temperature":  825 },
{"time":  236 , "temperature":  828.5 },
{"time":  237 , "temperature":  834.5 },
{"time":  238 , "temperature":  843.3 },
{"time":  239 , "temperature":  841.4 },
{"time":  240 , "temperature":  838.3 },
{"time":  241 , "temperature":  828.7 },
{"time":  242 , "temperature":  828 },
{"time":  243 , "temperature":  827.2 },
{"time":  244 , "temperature":  826.7 },
{"time":  245 , "temperature":  825.3 },
{"time":  246 , "temperature":  823.2 },
{"time":  247 , "temperature":  823 },
{"time":  248 , "temperature":  823.2 },
{"time":  249 , "temperature":  826.5 },
{"time":  250 , "temperature":  830.3 },
{"time":  251 , "temperature":  833 },
{"time":  252 , "temperature":  831.6 },
{"time":  253 , "temperature":  829.9 },
{"time":  254 , "temperature":  831.4 },
{"time":  255 , "temperature":  832.9 },
{"time":  256 , "temperature":  836.1 },
{"time":  257 , "temperature":  838.8 },
{"time":  258 , "temperature":  843.7 },
{"time":  259 , "temperature":  847.4 },
{"time":  260 , "temperature":  851.2 },
{"time":  261 , "temperature":  854.9 },
{"time":  262 , "temperature":  858.6 },
{"time":  263 , "temperature":  862.4 },
{"time":  264 , "temperature":  866.1 },
{"time":  265 , "temperature":  869.9 },
{"time":  266 , "temperature":  873.6 },
{"time":  267 , "temperature":  877.3 },
{"time":  268 , "temperature":  881.1 },
{"time":  269 , "temperature":  884.8 },
{"time":  270 , "temperature":  888.6 },
{"time":  271 , "temperature":  892.3 },
{"time":  272 , "temperature":  896 },
{"time":  273 , "temperature":  900.7 },
{"time":  274 , "temperature":  905.8 },
{"time":  275 , "temperature":  909.8 },
{"time":  276 , "temperature":  911 },
{"time":  277 , "temperature":  912.6 },
{"time":  278 , "temperature":  915.7 },
{"time":  279 , "temperature":  920.3 },
{"time":  280 , "temperature":  926.1 },
{"time":  281 , "temperature":  932.7 },
{"time":  282 , "temperature":  938.8 },
{"time":  283 , "temperature":  944.4 },
{"time":  284 , "temperature":  947.8 },
{"time":  285 , "temperature":  951.8 },
{"time":  286 , "temperature":  955.1 },
{"time":  287 , "temperature":  959.5 },
{"time":  288 , "temperature":  964.8 },
{"time":  289 , "temperature":  970.2 },
{"time":  290 , "temperature":  975.5 },
{"time":  291 , "temperature":  980.9 },
{"time":  292 , "temperature":  986.2 },
{"time":  293 , "temperature":  991.5 },
{"time":  294 , "temperature":  996.9 },
{"time":  295 , "temperature":  1002.2  },
{"time":  296 , "temperature":  1007.6  },
{"time":  297 , "temperature":  1012.9  },
{"time":  298 , "temperature":  1018.3  },
{"time":  299 , "temperature":  1023.6  },
{"time":  300 , "temperature":  1028.9  },
{"time":  301 , "temperature":  1034.3  },
{"time":  302 , "temperature":  1039.6  },
{"time":  303 , "temperature":  1041.4  },
{"time":  304 , "temperature":  1045.8  },
{"time":  305 , "temperature":  1050.8  },
{"time":  306 , "temperature":  1058.6  },
{"time":  307 , "temperature":  1061.5  },
{"time":  308 , "temperature":  1062.6  },
{"time":  309 , "temperature":  1063.3  },
{"time":  310 , "temperature":  1067.8  },
{"time":  311 , "temperature":  1072.9  },
{"time":  312 , "temperature":  1080.1  },
{"time":  313 , "temperature":  1085.3  },
{"time":  314 , "temperature":  1089.7  },
{"time":  315 , "temperature":  1092.2  },
{"time":  316 , "temperature":  1094  },
{"time":  317 , "temperature":  1095.7  },
{"time":  318 , "temperature":  1097.4  },
{"time":  319 , "temperature":  1099.2  },
{"time":  320 , "temperature":  1100.9  },
{"time":  321 , "temperature":  1102.7  },
{"time":  322 , "temperature":  1104.4  },
{"time":  323 , "temperature":  1106.1  },
{"time":  324 , "temperature":  1107.9  },
{"time":  325 , "temperature":  1109.6  },
{"time":  326 , "temperature":  1111.3  },
{"time":  327 , "temperature":  1113.6  },
{"time":  328 , "temperature":  1118.1  },
{"time":  329 , "temperature":  1124.2  },
{"time":  330 , "temperature":  1121  },
{"time":  331 , "temperature":  1113.5  },
{"time":  332 , "temperature":  1103.6  },
{"time":  333 , "temperature":  1103  },
{"time":  334 , "temperature":  1095.2  },
{"time":  335 , "temperature":  1086.4  },
{"time":  336 , "temperature":  1073.2  },
{"time":  337 , "temperature":  1065.2  },
{"time":  338 , "temperature":  1054.8  },
{"time":  339 , "temperature":  1044.5  },
{"time":  341 , "temperature":  1034.1  },
{"time":  342 , "temperature":  1023.7  },
{"time":  343 , "temperature":  1013.4  },
{"time":  344 , "temperature":  1003  },
{"time":  345 , "temperature":  992.6 },
{"time":  346 , "temperature":  982.3 },
{"time":  347 , "temperature":  971.9 },
{"time":  348 , "temperature":  961.5 },
{"time":  349 , "temperature":  951.8 },
{"time":  350 , "temperature":  941.8 },
{"time":  351 , "temperature":  930.2 },
{"time":  352 , "temperature":  915.4 },
{"time":  353 , "temperature":  899.4 },
{"time":  354 , "temperature":  883.5 },
{"time":  355 , "temperature":  868.5 },
{"time":  356 , "temperature":  855 },
{"time":  357 , "temperature":  843.2 },
{"time":  358 , "temperature":  833 },
{"time":  359 , "temperature":  822.9 },
{"time":  360 , "temperature":  812.8 },
{"time":  361 , "temperature":  802.6 },
{"time":  362 , "temperature":  792.5 },
{"time":  363 , "temperature":  782.4 },
{"time":  364 , "temperature":  772.2 },
{"time":  365 , "temperature":  759.7 },
{"time":  366 , "temperature":  746.6 },
{"time":  367 , "temperature":  733.1 },
{"time":  368 , "temperature":  722 },
{"time":  369 , "temperature":  711.6 },
{"time":  370 , "temperature":  700.8 },
{"time":  371 , "temperature":  689.6 },
{"time":  372 , "temperature":  678.3 },
{"time":  373 , "temperature":  668.2 },
{"time":  374 , "temperature":  659.9 },
{"time":  375 , "temperature":  653.1 },
{"time":  376 , "temperature":  647.4 },
{"time":  377 , "temperature":  641.7 },
{"time":  378 , "temperature":  636 },
{"time":  379 , "temperature":  630.3 },
{"time":  380 , "temperature":  624.6 },
{"time":  381 , "temperature":  618.8 },
{"time":  382 , "temperature":  613.1 },
{"time":  383 , "temperature":  607.4 },
{"time":  384 , "temperature":  601.7 },
{"time":  385 , "temperature":  594.1 },
{"time":  386 , "temperature":  586.4 },
{"time":  387 , "temperature":  578.9 },
{"time":  388 , "temperature":  573.4 },
{"time":  389 , "temperature":  567.7 },
{"time":  390 , "temperature":  562.2 },
{"time":  391 , "temperature":  556.4 },
{"time":  392 , "temperature":  550.6 },
{"time":  393 , "temperature":  544.1 },
{"time":  394 , "temperature":  537.5 },
{"time":  395 , "temperature":  531 },
{"time":  396 , "temperature":  524.5 },
{"time":  397 , "temperature":  518 },
{"time":  398 , "temperature":  511.5 },
{"time":  399 , "temperature":  505 },
{"time":  400 , "temperature":  498.5 },
{"time":  401 , "temperature":  492 },
{"time":  402 , "temperature":  485.5 },
{"time":  403 , "temperature":  479 },
{"time":  404 , "temperature":  472.5 },
{"time":  405 , "temperature":  465.9 },
{"time":  406 , "temperature":  461.1 },
{"time":  407 , "temperature":  456.6 },
{"time":  408 , "temperature":  453 },
{"time":  409 , "temperature":  447.8 },
{"time":  410 , "temperature":  441.3 },
{"time":  411 , "temperature":  434.6 },
{"time":  412 , "temperature":  428.1 },
{"time":  413 , "temperature":  424 },
{"time":  414 , "temperature":  417.6 },
{"time":  415 , "temperature":  411.9 },
{"time":  416 , "temperature":  406.5 },
{"time":  417 , "temperature":  403.3 },
{"time":  418 , "temperature":  400.1 },
{"time":  419 , "temperature":  397.1 },
{"time":  420 , "temperature":  394.7 },
{"time":  421 , "temperature":  392.3 },
{"time":  422 , "temperature":  389.4 },
{"time":  423 , "temperature":  386.5 },
{"time":  424 , "temperature":  383.6 },
{"time":  425 , "temperature":  380.8 },
{"time":  426 , "temperature":  377.9 },
{"time":  427 , "temperature":  375 },
{"time":  428 , "temperature":  372.1 },
{"time":  429 , "temperature":  369.2 },
{"time":  430 , "temperature":  366.3 },
{"time":  431 , "temperature":  363.4 },
{"time":  432 , "temperature":  360.6 },
{"time":  433 , "temperature":  357.7 },
{"time":  434 , "temperature":  356.1 },
{"time":  435 , "temperature":  355 },
{"time":  436 , "temperature":  354.3 },
{"time":  437 , "temperature":  352.9 },
{"time":  438 , "temperature":  351.7 },
{"time":  439 , "temperature":  350.6 },
{"time":  440 , "temperature":  349.5 },
{"time":  441 , "temperature":  348.2 },
{"time":  442 , "temperature":  346.4 },
{"time":  443 , "temperature":  344.6 },
{"time":  444 , "temperature":  342.5 },
{"time":  445 , "temperature":  340.4 },
{"time":  446 , "temperature":  338 },
{"time":  447 , "temperature":  336.2 },
{"time":  448 , "temperature":  334.6 },
{"time":  449 , "temperature":  334 },
{"time":  450 , "temperature":  332.5 },
{"time":  451 , "temperature":  330.3 },
{"time":  452 , "temperature":  326.9 },
{"time":  453 , "temperature":  323.4 },
{"time":  454 , "temperature":  319.9 },
{"time":  455 , "temperature":  316.5 },
{"time":  456 , "temperature":  313 },
{"time":  457 , "temperature":  309.5 },
{"time":  458 , "temperature":  306 },
{"time":  459 , "temperature":  302.6 },
{"time":  460 , "temperature":  299.1 },
{"time":  461 , "temperature":  295.6 },
{"time":  462 , "temperature":  292 },
{"time":  463 , "temperature":  289.4 },
{"time":  464 , "temperature":  286.8 },
{"time":  465 , "temperature":  284.4 },
{"time":  466 , "temperature":  280.5 },
{"time":  467 , "temperature":  277 },
{"time":  468 , "temperature":  274 },
{"time":  469 , "temperature":  271.5 },
{"time":  470 , "temperature":  268.4 },
{"time":  471 , "temperature":  264.8 },
{"time":  472 , "temperature":  260.9 },
{"time":  473 , "temperature":  257.2 },
{"time":  474 , "temperature":  255.3 },
{"time":  475 , "temperature":  254.2 },
{"time":  476 , "temperature":  253.7 },
{"time":  477 , "temperature":  252.3 },
{"time":  478 , "temperature":  250.9 },
{"time":  479 , "temperature":  249.5 },
{"time":  480 , "temperature":  248.2 },
{"time":  482 , "temperature":  246.8 },
{"time":  483 , "temperature":  245.4 },
{"time":  484 , "temperature":  244 },
{"time":  485 , "temperature":  242.6 },
{"time":  486 , "temperature":  241.2 },
{"time":  487 , "temperature":  239.8 },
{"time":  488 , "temperature":  238.4 },
{"time":  489 , "temperature":  237 },
{"time":  490 , "temperature":  235.6 },
{"time":  491 , "temperature":  234.2 },
{"time":  492 , "temperature":  232.8 },
{"time":  493 , "temperature":  231.4 },
{"time":  494 , "temperature":  230.5 },
{"time":  495 , "temperature":  230 },
{"time":  496 , "temperature":  230.2 },
{"time":  497 , "temperature":  230.3 },
{"time":  498 , "temperature":  230.4 },
{"time":  499 , "temperature":  229.3 },
{"time":  500 , "temperature":  228.2 },
]

var ƒ = d3.f

var sel = d3.select('body').html('')
var c = d3.conventions({
  parentSel: sel, 
  totalWidth: sel.node().offsetWidth, 
  height: 400, 
  margin: {left: 50, right: 50, top: 40, bottom: 30}
})

c.svg.append('rect').at({width: c.width, height: c.height, opacity: 0})

c.x.domain([0, 500])
c.y.domain([0, 1200])

c.xAxis.ticks(10).tickFormat(ƒ())
c.yAxis.ticks(5).tickFormat(d => d + ' C')

var area = d3.area().x(ƒ('time', c.x)).y0(ƒ('temperature', c.y)).y1(c.height)
var line = d3.area().x(ƒ('time', c.x)).y(ƒ('temperature', c.y))

var clipRect = c.svg
  .append('clipPath#clip')
  .append('rect')
  .at({width: c.x(330), height: c.height})

var correctSel = c.svg.append('g').attr('clip-path', 'url(#clip)')

correctSel.append('path.area').at({d: area(data)})
correctSel.append('path.line').at({d: line(data)})
yourDataSel = c.svg.append('path.your-line')

c.drawAxis()

yourData = data
  .map(function(d){ return {time: d.time, temperature: d.temperature, defined: 0} })
  .filter(function(d){
    if (d.time == 330) d.defined = true
    return d.time >= 330
  })

var completed = false

var drag = d3.drag()
  .on('drag', function(){
    var pos = d3.mouse(this)
    var time = clamp(331, 501, c.x.invert(pos[0]))
    var temperature = clamp(0, c.y.domain()[1], c.y.invert(pos[1]))

    yourData.forEach(function(d){
      if (Math.abs(d.time - time) < 5){
        d.temperature = temperature
        d.defined = true
      }
    })

    yourDataSel.at({d: line.defined(ƒ('defined'))(yourData)})

    if (!completed && d3.mean(yourData, ƒ('defined')) == 1){
      completed = true
      clipRect.transition().duration(1000).attr('width', c.x(500))
    }
  })

c.svg.call(drag)



function clamp(a, b, c){ return Math.max(a, Math.min(b, c)) }